# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=none | FileCheck %s --check-prefix=SOFT-EXN-RTTI-UNALIGNED
# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=none -munaligned-access | FileCheck %s --check-prefix=SOFT-EXN-RTTI-UNALIGNED
# SOFT-EXN-RTTI-UNALIGNED: arm-none-eabi/armv8m.main_soft_nofp_exn_rtti_unaligned_size{{$}}
# SOFT-EXN-RTTI-UNALIGNED-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=none -fno-exceptions -fno-rtti | FileCheck %s --check-prefix=SOFT-UNALIGNED
# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=none -fno-exceptions -fno-rtti -munaligned-access | FileCheck %s --check-prefix=SOFT-UNALIGNED
# SOFT-UNALIGNED: arm-none-eabi/armv8m.main_soft_nofp_unaligned_size{{$}}
# SOFT-UNALIGNED-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabihf -mfpu=fpv5-sp-d16 | FileCheck --check-prefix=HARD-EXN-RTTI-UNALIGNED %s
# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabihf -mfpu=fpv5-sp-d16 -munaligned-access | FileCheck --check-prefix=HARD-EXN-RTTI-UNALIGNED %s
# HARD-EXN-RTTI-UNALIGNED: arm-none-eabi/armv8m.main_hard_fp_exn_rtti_unaligned_size{{$}}
# HARD-EXN-RTTI-UNALIGNED-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabihf -mfpu=fpv5-sp-d16 -fno-exceptions -fno-rtti | FileCheck --check-prefix=HARD-UNALIGNED %s
# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabihf -mfpu=fpv5-sp-d16 -fno-exceptions -fno-rtti -munaligned-access | FileCheck --check-prefix=HARD-UNALIGNED %s
# HARD-UNALIGNED: arm-none-eabi/armv8m.main_hard_fp_unaligned_size{{$}}
# HARD-UNALIGNED-EMPTY:

# Fallback to armv7m
# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=none -mno-unaligned-access | FileCheck --check-prefix=ARMV7M-SOFT-EXN-RTTI %s
# ARMV7M-SOFT-EXN-RTTI: arm-none-eabi/armv7m_soft_nofp_exn_rtti_size{{$}}
# ARMV7M-SOFT-EXN-RTTI-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=none -fno-exceptions -fno-rtti -mno-unaligned-access | FileCheck --check-prefix=ARMV7M-SOFT %s
# ARMV7M-SOFT: arm-none-eabi/armv7m_soft_nofp_size{{$}}
# ARMV7M-SOFT-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=fpv5-sp-d16 | FileCheck --check-prefix=ARMV7M-SOFTFP-EXN-RTTI-UNALIGNED %s
# ARMV7M-SOFTFP-EXN-RTTI-UNALIGNED: arm-none-eabi/armv7m_soft_fpv4_sp_d16_exn_rtti_unaligned_size{{$}}
# ARMV7M-SOFTFP-EXN-RTTI-UNALIGNED-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=fpv5-sp-d16 -mno-unaligned-access | FileCheck --check-prefix=ARMV7M-SOFTFP-EXN-RTTI %s
# ARMV7M-SOFTFP-EXN-RTTI: arm-none-eabi/armv7m_soft_fpv4_sp_d16_exn_rtti_size{{$}}
# ARMV7M-SOFTFP-EXN-RTTI-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=fpv5-sp-d16 -fno-exceptions -fno-rtti | FileCheck --check-prefix=ARMV7M-SOFTFP-UNALIGNED %s
# ARMV7M-SOFTFP-UNALIGNED: arm-none-eabi/armv7m_soft_fpv4_sp_d16_unaligned_size{{$}}
# ARMV7M-SOFTFP-UNALIGNED-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabi -mfpu=fpv5-sp-d16 -fno-exceptions -fno-rtti -mno-unaligned-access | FileCheck --check-prefix=ARMV7M-SOFTFP %s
# ARMV7M-SOFTFP: arm-none-eabi/armv7m_soft_fpv4_sp_d16_size{{$}}
# ARMV7M-SOFTFP-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabihf -mfpu=fpv5-sp-d16 -mno-unaligned-access | FileCheck --check-prefix=ARMV7M-HARD-EXN-RTTI %s
# ARMV7M-HARD-EXN-RTTI: arm-none-eabi/armv7m_hard_fpv4_sp_d16_exn_rtti_size{{$}}
# ARMV7M-HARD-EXN-RTTI-EMPTY:

# RUN: %clang -print-multi-directory --target=armv8m.main-none-eabihf -mfpu=fpv5-sp-d16 -fno-exceptions -fno-rtti -mno-unaligned-access | FileCheck --check-prefix=ARMV7M-HARD %s
# ARMV7M-HARD: arm-none-eabi/armv7m_hard_fpv4_sp_d16_size{{$}}
# ARMV7M-HARD-EMPTY:

